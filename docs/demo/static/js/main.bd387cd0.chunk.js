(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{161:function(e,t,n){"use strict";(function(e){var r=n(3),i=n(11),a=n.n(i),c=n(6),o=n(28),u=n.n(o),s=n(51),f=function(e){function t(t){var n=e.call(this,t)||this;return n.name="JWSVerificationFailed",n}return r.c(t,e),t}(Error);t.a={decode:function(e,t){void 0===t&&(t={complete:!1});var n=e.split("."),r=n[0],i=n[1],c=n[2];return t.complete?{header:JSON.parse(a.a.decode(r)),payload:JSON.parse(a.a.decode(i)),signature:c}:JSON.parse(a.a.decode(i))},sign:function(t,n,i){return void 0===i&&(i={alg:"ES256K"}),r.b(void 0,void 0,void 0,function(){var o,f,d,l,h,v,b,p,g,m,w;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(s.a)(n)];case 1:return o=r.sent(),[4,Object(c.c)()];case 2:return f=r.sent(),d=a.a.encode(JSON.stringify(i)),l=a.a.encode(JSON.stringify(t)),h=d+"."+l,v=e.from(h),b=u.a.createHash("sha256").update(v).digest().toString("hex"),p=Object(c.b)(b),g=f.signMessageHashCompact(o,p),m=Object(c.a)(g),w=a.a.encode(e.from(m,"hex")),[2,d+"."+l+"."+w]}})})},signDetached:function(t,n,i){return void 0===i&&(i={alg:"ES256K",b64:!1,crit:["b64"]}),r.b(void 0,void 0,void 0,function(){var o,f,d,l,h,v,b,p,g,m;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(s.a)(n)];case 1:return o=r.sent(),[4,Object(c.c)()];case 2:return f=r.sent(),d=a.a.encode(JSON.stringify(i)),l=e.concat([e.from(d+".","utf8"),e.from(t.buffer,t.byteOffset,t.length)]),h=e.from(l),v=u.a.createHash("sha256").update(h).digest().toString("hex"),b=Object(c.b)(v),p=f.signMessageHashCompact(o,b),g=Object(c.a)(p),m=a.a.encode(e.from(g,"hex")),[2,d+".."+m]}})})},verify:function(t,n){return r.b(void 0,void 0,void 0,function(){var i,o,d,l,h,v,b,p,g,m,w;return r.d(this,function(r){switch(r.label){case 0:return[4,Object(c.c)()];case 1:return i=r.sent(),[4,Object(s.b)(n)];case 2:if(o=r.sent(),d=t.split("."),l=d[0],h=d[1],v=d[2],b=l+"."+h,p=e.from(b),g=u.a.createHash("sha256").update(p).digest().toString("hex"),m=Object(c.b)(g),w=Object(c.b)(a.a.toBuffer(v).toString("hex")),i.verifySignatureCompact(w,o,m))return[2,JSON.parse(a.a.decode(h))];throw new f("signature verification failed")}})})},verifyDetached:function(t,n,i){return r.b(void 0,void 0,void 0,function(){var o,d,l,h,v,b,p,g,m,w,O;return r.d(this,function(r){switch(r.label){case 0:if(-1===t.indexOf(".."))throw new f("not a valid rfc7797 jws.");if(o=t.split(".."),d=o[0],l=o[1],"ES256K"!==(h=JSON.parse(a.a.decode(d))).alg)throw new Error("JWS alg is not signed with ES256K.");if(!1!==h.b64||!h.crit||!h.crit.length||"b64"!==h.crit[0])throw new Error("JWS Header is not in rfc7797 format (not detached).");return[4,Object(s.b)(i)];case 1:return v=r.sent(),[4,Object(c.c)()];case 2:if(b=r.sent(),p=e.concat([e.from(d+".","utf8"),e.from(n.buffer,n.byteOffset,n.length)]),g=e.from(p),m=u.a.createHash("sha256").update(g).digest().toString("hex"),w=Object(c.b)(m),O=Object(c.b)(a.a.toBuffer(l).toString("hex")),b.verifySignatureCompact(O,v,w))return[2,!0];throw new Error("Cannot verify detached signature.")}})})}}}).call(this,n(4).Buffer)},163:function(e,t,n){e.exports=n(326)},168:function(e,t,n){},174:function(e,t){},176:function(e,t){},209:function(e,t){},210:function(e,t){},259:function(e,t){},277:function(e,t){},305:function(e,t){},309:function(e,t){},322:function(e,t){},323:function(e,t){},326:function(e,t,n){"use strict";n.r(t);var r=n(10),i=n.n(r),a=n(154),c=n.n(a),o=(n(168),n(0)),u=n.n(o),s=n(7),f=n(155),d=n(156),l=n(159),h=n(157),v=n(160),b=n(161),p=n(92),g={crv:"secp256k1",d:"rhYFsBPF9q3-uZThy7B3c4LDF_8wnozFUAEm5LLC4Zw",kid:"JUvpllMEYUZ2joO59UNui_XYDqxVqiFLLAJ8klWuPBw",kty:"EC",x:"dWCvM4fTdeM0KmloF57zxtBPXTOythHPMm1HCLrdd3A",y:"36uMVGM7hnw-N6GnjFcihWE3SkrhMLzzLCdPMXPEXlA"},m={crv:"secp256k1",kid:"JUvpllMEYUZ2joO59UNui_XYDqxVqiFLLAJ8klWuPBw",kty:"EC",x:"dWCvM4fTdeM0KmloF57zxtBPXTOythHPMm1HCLrdd3A",y:"36uMVGM7hnw-N6GnjFcihWE3SkrhMLzzLCdPMXPEXlA"},w={challenge:"abc",created:"2019-01-16T20:13:10Z",domain:"example.com",proofPurpose:"authentication",verificationMethod:"https://example.com/i/alice/keys/2"},O={"@context":{action:"schema:action",schema:"http://schema.org/"},action:"AuthenticateMe"},S=function(e){function t(){var e,n;Object(f.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={JWS:""},n}return Object(v.a)(t,e),Object(d.a)(t,[{key:"componentWillMount",value:function(){var e=Object(s.a)(u.a.mark(function e(){var t,n,r,i;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.sign({hello:"world"},g);case 2:return t=e.sent,e.next=5,b.a.verify(t,m);case 5:return n=e.sent,this.setState({jws:t,verified:n}),e.next=9,p.a(O,w,g);case 9:return r=e.sent,e.next=12,p.b(r,m);case 12:i=e.sent,this.setState({ldSig:r,lsSigVerified:i});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement("h4",null,"ES256K"),i.a.createElement("h5",null,"Public Key"),i.a.createElement("pre",null,JSON.stringify(m,null,2)),i.a.createElement("h5",null,"JWS"),i.a.createElement("code",null,this.state.jws),i.a.createElement("h5",null,"Verified Payload"),i.a.createElement("code",null,JSON.stringify(this.state.verified,null,2)),i.a.createElement("hr",null),i.a.createElement("h5",null,"JSON-LD Signature"),i.a.createElement("pre",null,JSON.stringify(this.state.ldSig,null,2)),i.a.createElement("h5",null,"Verified JSON-LD Signature"),i.a.createElement("code",null,JSON.stringify(this.state.lsSigVerified,null,2)))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(i.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},51:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return s}),n.d(t,"b",function(){return f});var r=n(3),i=n(37),a=n.n(i),c=(n(11),n(28),n(6)),o=(n(158),function(e){return r.b(void 0,void 0,void 0,function(){return r.d(this,function(t){return[2,a.a.from(r.a({},e,{crv:"K-256"}),"jwk").toString("blk","private")]})})}),u=function(e){return r.b(void 0,void 0,void 0,function(){var t,n,i;return r.d(this,function(o){switch(o.label){case 0:return[4,Object(c.c)()];case 1:return t=o.sent(),n=a.a.from(r.a({},e,{crv:"K-256"}),"jwk").toString("blk","public"),i=t.compressPublicKey(Object(c.b)(n)),[2,Object(c.a)(i)]}})})},s=function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,o(e)];case 1:return t=n.sent(),[2,Object(c.b)(t)]}})})},f=function(e){return r.b(void 0,void 0,void 0,function(){var t;return r.d(this,function(n){switch(n.label){case 0:return[4,u(e)];case 1:return t=n.sent(),[2,Object(c.b)(t)]}})})};c.a,c.b}).call(this,n(4).Buffer)},92:function(e,t,n){"use strict";(function(e){n.d(t,"a",function(){return c}),n.d(t,"b",function(){return o});var r=n(12),i=n(93),a=n(161),c=function(t,n,c){return r.b(void 0,void 0,void 0,function(){var o,u,s,f,d,l;return r.c(this,function(h){switch(h.label){case 0:return o=r.a({},n,{type:"EcdsaSecp256k1Signature2019"}),[4,Object(i.a)(t,o)];case 1:return u=h.sent(),s=u.framed,f=u.verifyDataHexString,d=e.from(f,"hex"),[4,a.a.signDetached(d,c)];case 2:return l=h.sent(),[2,r.a({},s,{proof:r.a({},o,{jws:l})})]}})})},o=function(t,n){return r.b(void 0,void 0,void 0,function(){var c,o;return r.c(this,function(r){switch(r.label){case 0:return[4,Object(i.a)(t,t.proof)];case 1:return c=r.sent().verifyDataHexString,o=e.from(c,"hex"),[2,a.a.verifyDetached(t.proof.jws,o,n)]}})})}}).call(this,n(4).Buffer)},93:function(e,t,n){"use strict";var r=n(12),i=n(28),a=n.n(i),c=n(60),o=n.n(c),u=function(e){return r.b(void 0,void 0,void 0,function(){return r.c(this,function(t){return[2,o.a.canonize(e)]})})},s=function(e){var t=a.a.createHash("sha256");return t.update(e),t.digest("hex")},f=function(e){var t=r.a({},e,{"@context":"https://w3id.org/security/v2"});return delete t.jws,delete t.signatureValue,delete t.proofValue,u(t)},d=function(e){var t=r.a({},e);return delete t.proof,u(t)};t.a=function(e,t){return r.b(void 0,void 0,void 0,function(){var n,i,a,c,u,l,h;return r.c(this,function(v){switch(v.label){case 0:if((n=r.a({},t)).creator&&(n.verificationMethod=t.creator),!n.verificationMethod)throw new Error("signatureOptions.verificationMethod is required");return n.created||(n.created=(new Date).toISOString()),[4,o.a.expand(e)];case 1:return i=v.sent()[0],[4,o.a.compact(i,"https://w3id.org/security/v2",{skipExpansion:!0})];case 2:return a=v.sent(),[4,f(n)];case 3:return c=v.sent(),u=s(c),[4,d(a)];case 4:return l=v.sent(),h=s(l),[2,{framed:a,verifyDataHexString:u+h}]}})})}}},[[163,1,2]]]);
//# sourceMappingURL=main.bd387cd0.chunk.js.map